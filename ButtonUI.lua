repeat task.wait()until game:IsLoaded()local a=game:GetService("Players")local b=game:GetService("UserInputService")local c=game:GetService("RunService")local d=game:GetService("CoreGui")local e=a.LocalPlayer or a.PlayerAdded:Wait()local f=e:WaitForChild("PlayerGui")local g=workspace.CurrentCamera;local h={ForceShowButton=true,Position={Horizontal="left",Vertical="top",OffsetX=140,OffsetY=140},ButtonSize={Min=40,Max=46},ImageId="rbxassetid://114090251469395",Stroke={BaseThickness=1,PulseThickness=1.5,PulseSpeed=1.0,HueSpeed=0.09,Saturation=0.95,Value=1.0,BaseTransparency=0.05,PulseTransparency=0.12},Keybind={Key=Enum.KeyCode.M,Modifier=Enum.KeyCode.LeftControl}}local function i(j,k)local l={}for m,n in pairs(j)do if type(n)=="table"and k[m]and type(k[m])=="table"then l[m]=i(n,k[m])else l[m]=k[m]~=nil and k[m]or n end end;return l end;local o=h;if getgenv and getgenv().ATGButtonUI then o=i(h,getgenv().ATGButtonUI)end;local function p()local q=b.KeyboardEnabled;local r=b.TouchEnabled;local s=b.GamepadEnabled;return{keyboard=q,touch=r,gamepad=s,shouldShowButton=o.ForceShowButton or not q or r and not q or s and not q}end;local function t()local u=g.ViewportSize;local r=b.TouchEnabled;local v=r and o.ButtonSize.Min or o.ButtonSize.Max;return UDim2.fromOffset(v,v)end;local function w()local u=g.ViewportSize;local x=o.Position.OffsetX;local y=o.Position.OffsetY;local z,A,B;if o.Position.Horizontal=="left"then z=0;A=x;B=0 elseif o.Position.Horizontal=="right"then z=1;A=-x;B=1 else z=0.5;A=0;B=0.5 end;local C,D,E;if o.Position.Vertical=="top"then C=0;D=y;E=0 elseif o.Position.Vertical=="bottom"then C=1;D=-y;E=1 else C=0.5;D=0;E=0.5 end;return UDim2.new(z,A,C,D),Vector2.new(B,E)end;local function F(G)local H=Instance.new("ImageButton")H.Name="FluentToggleButton"H.Size=t()local I,J=w()H.Position=I;H.AnchorPoint=J;H.BackgroundColor3=Color3.fromRGB(30,30,30)H.BackgroundTransparency=0;H.BorderSizePixel=0;H.Image=o.ImageId;H.Active=true;H.Parent=G;local K=Instance.new("UICorner",H)K.CornerRadius=UDim.new(0,8)local L=Instance.new("UIStroke",H)L.Name="FluentStroke"L.Thickness=o.Stroke.BaseThickness;L.Transparency=o.Stroke.BaseTransparency;L.LineJoinMode=Enum.LineJoinMode.Round;return H,L end;local function M(L)local N=tick()local O;O=c.RenderStepped:Connect(function()if not L or not L.Parent then if O then O:Disconnect()end;return end;local P=tick()-N;local Q=P*o.Stroke.HueSpeed%1;local R=(math.sin(P*o.Stroke.PulseSpeed*math.pi*2)+1)/2;L.Color=Color3.fromHSV(Q,o.Stroke.Saturation,o.Stroke.Value)L.Thickness=o.Stroke.BaseThickness+R*o.Stroke.PulseThickness;L.Transparency=o.Stroke.BaseTransparency+R*o.Stroke.PulseTransparency end)return O end;local function S(H)local u=g.ViewportSize;local T=H.AbsolutePosition;local U=H.AbsoluteSize;local V=T.X;local W=T.X+U.X;local X=T.Y;local Y=T.Y+U.Y;local Z=false;local _=T.X;local a0=T.Y;if V<0 then _=0;Z=true elseif W>u.X then _=u.X-U.X;Z=true end;if X<0 then a0=0;Z=true elseif Y>u.Y then a0=u.Y-U.Y;Z=true end;if Z then H.Position=UDim2.fromOffset(_,a0)end end;local function a1(H)local a2=false;local a3=nil;local a4=nil;local a5=nil;H.InputBegan:Connect(function(a6)if a6.UserInputType==Enum.UserInputType.MouseButton1 or a6.UserInputType==Enum.UserInputType.Touch then a2=true;a3=a6;a4=a6.Position;a5=H.Position;a6.Changed:Connect(function()if a6.UserInputState==Enum.UserInputState.End then a2=false;S(H)end end)end end)b.InputChanged:Connect(function(a6)if a2 and(a6.UserInputType==Enum.UserInputType.MouseMovement or a6.UserInputType==Enum.UserInputType.Touch)then local a7=a6.Position-a4;local a8=UDim2.new(a5.X.Scale,a5.X.Offset+a7.X,a5.Y.Scale,a5.Y.Offset+a7.Y)H.Position=a8;S(H)end end)g:GetPropertyChangedSignal("ViewportSize"):Connect(function()task.wait(0.1)H.Size=t()if not a2 then local I,J=w()H.Position=I;H.AnchorPoint=J else S(H)end;task.wait(0.05)S(H)end)task.wait(0.2)S(H)end;local function a9()local aa={}local ab={}local function ac(ad)if ab[ad]then return end;ab[ad]=true;table.insert(aa,ad)end;local ae={"TabDisplay","ContainerCanvas","AcrylicPaint","TitleBar","TabHolder","Fluent"}local function af(ag)if ag:IsA("ScreenGui")and ag.Name:lower():find("fluent")then ac(ag)end;for ah,ad in ipairs(ag:GetDescendants())do if ad:IsA("GuiObject")then local ai=ad.Name:lower()for ah,aj in ipairs(ae)do if ai:find(aj:lower())then local ak=ad:FindFirstAncestorOfClass("ScreenGui")if ak then ac(ak)end;break end end;if ad:IsA("TextLabel")or ad:IsA("TextButton")or ad:IsA("TextBox")then local al=ad.Text:lower()if al:find("fluent")or al:find("interface")or al:find("by dawid")then local ak=ad:FindFirstAncestorOfClass("ScreenGui")if ak then ac(ak)end end end end end end;for ah,ag in ipairs(f:GetChildren())do if ag:IsA("ScreenGui")then af(ag)end end;pcall(function()for ah,ag in ipairs(d:GetChildren())do if ag:IsA("ScreenGui")then af(ag)end end end)if#aa==0 then for ah,ag in ipairs(f:GetChildren())do if ag:IsA("ScreenGui")then ac(ag)end end end;return aa end;local am=false;local an=nil;local function ao(ad)if not ad then return true end;if an and(ad==an or ad:IsDescendantOf(an))then return true end;return false end;local function ap()if am then return end;am=true;task.delay(0.18,function()am=false end)local aq=pcall(function()if typeof(Window)=="table"and type(Window.Minimize)=="function"then Window:Minimize()return true end end)if aq then return end;local aa=a9()if#aa==0 then for ah,ag in ipairs(f:GetChildren())do if ag:IsA("ScreenGui")and not ao(ag)then pcall(function()ag.Enabled=not ag.Enabled end)end end;return end;for ah,ag in ipairs(aa)do if not ao(ag)then pcall(function()if ag:IsA("ScreenGui")then ag.Enabled=not ag.Enabled elseif ag:IsA("GuiObject")then ag.Visible=not ag.Visible end end)end end end;local function ar()local as=p()if not as.shouldShowButton then return end;an=Instance.new("ScreenGui")an.Name="FluentToggleGui"an.ResetOnSpawn=false;an.DisplayOrder=9999;an.IgnoreGuiInset=true;local aq=pcall(function()an.Parent=d end)if not aq then an.Parent=f end;local H,L=F(an)M(L)a1(H)H.Activated:Connect(function()pcall(ap)end)if as.keyboard then b.InputBegan:Connect(function(a6,at)if at then return end;if a6.UserInputType==Enum.UserInputType.Keyboard and a6.KeyCode==o.Keybind.Key and b:IsKeyDown(o.Keybind.Modifier)then pcall(ap)end end)end end;ar()
